<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Labellyï½œé€šè²©ã‚µã‚¤ãƒˆã®æ¡ä»¶ã‚’äº‹å‰ã«è¦‹ãˆã‚‹åŒ–</title>
  <meta name="description" content="ã“ã®é€šè²©ã‚µã‚¤ãƒˆã§ã€ã‚ã¨ã‹ã‚‰å›°ã‚‰ãªã„ã‹ï¼Ÿã€é…é€ãƒ»è¿”å“ãƒ»è¡¨è¨˜ãªã©ã€è¦‹è½ã¨ã—ã‚„ã™ã„æ¡ä»¶ã‚’äº‹å‰ã«è¦‹ãˆã‚‹åŒ–ã—ã¾ã™ã€‚" />

  <!-- Favicon / OGï¼ˆæ—¢å­˜ã®ã¾ã¾ä½¿ãˆã‚‹ï¼‰ -->
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <meta property="og:title" content="Labelly" />
  <meta property="og:description" content="é…é€ãƒ»è¿”å“ãƒ»è¡¨è¨˜ãªã©ã€è¦‹è½ã¨ã—ã‚„ã™ã„æ¡ä»¶ã‚’äº‹å‰ã«è¦‹ãˆã‚‹åŒ–ã—ã¾ã™ã€‚" />
  <meta property="og:image" content="/og.svg" />
  <meta property="og:type" content="website" />

  <style>
    :root {
      --bg: #f4f6fb;
      --card: #ffffff;
      --text: #0f172a;
      --muted: #64748b;
      --border: #e5e7eb;
      --shadow: 0 18px 40px rgba(2, 6, 23, .10);
      --radius: 16px;
      --blue: #2563eb;
      --green: #16a34a;
      --yellow: #eab308;
      --orange: #f97316;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Hiragino Kaku Gothic ProN", "Noto Sans JP", sans-serif;
      color: var(--text);
      background: var(--bg);
    }

    /* ===== Headerï¼ˆå‰ã®æ„Ÿã˜ï¼šãƒ€ãƒ¼ã‚¯ï¼‰ ===== */
    header {
      background: linear-gradient(180deg, #0b1020 0%, #070a13 100%);
      color: #fff;
      border-bottom: 1px solid rgba(255, 255, 255, .08);
    }

    .header-inner {
      max-width: 980px;
      margin: 0 auto;
      padding: 16px 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      user-select: none;
    }

    .logo svg {
      display: block;
    }

    .logo .word {
      font-weight: 800;
      letter-spacing: .2px;
      font-size: 22px;
      line-height: 1;
      transform: translateY(2px);
      /* â† y ã®å°»å°¾ã¶ã‚“ã€ã»ã‚“ã®å°‘ã—ä¸‹ã¸ */
    }

    /* ===== Layout ===== */
    main {
      max-width: 980px;
      margin: 28px auto 80px;
      padding: 0 18px;
    }

    .hero {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 22px;
    }

    .hero p {
      margin: 0 0 14px;
      color: var(--muted);
      line-height: 1.7;
      text-align: center;
      font-size: 14.5px;
    }

    /* ===== Input row ===== */
    .row {
      display: flex;
      gap: 10px;
      align-items: center;
      justify-content: center;
      flex-wrap: wrap;
    }

    .url {
      flex: 1 1 520px;
      max-width: 720px;
      height: 44px;
      padding: 0 14px;
      font-size: 15.5px;
      border-radius: 10px;
      border: 1px solid var(--border);
      outline: none;
      background: #fff;
    }

    .url:focus {
      border-color: rgba(37, 99, 235, .55);
      box-shadow: 0 0 0 4px rgba(37, 99, 235, .12);
    }

    .btn {
      height: 44px;
      padding: 0 18px;
      border: 0;
      border-radius: 10px;
      cursor: pointer;
      background: var(--blue);
      color: #fff;
      font-weight: 700;
      letter-spacing: .2px;
      min-width: 96px;
    }

    .btn:disabled {
      opacity: .6;
      cursor: not-allowed;
    }

    .hint {
      margin-top: 10px;
      text-align: center;
      color: var(--muted);
      font-size: 12.5px;
    }

    /* ===== Result ===== */
    #resultWrap {
      margin-top: 18px;
    }

    .result-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    .result-top {
      padding: 16px 18px 0;
    }

    .summary-line {
      font-weight: 800;
      line-height: 1.55;
      padding: 12px 14px;
      border-radius: 12px;
      background: #f3f4f6;
      margin: 0 0 14px 0;
      display: flex;
      gap: 10px;
      align-items: flex-start;
    }

    .summary-line .bulb {
      transform: translateY(1px);
    }

    .label {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 0 0 12px;
      font-size: 20px;
      font-weight: 900;
    }

    .dot {
      width: 12px;
      height: 12px;
      border-radius: 999px;
      background: #999;
      box-shadow: 0 0 0 4px rgba(0, 0, 0, .05);
      flex: 0 0 auto;
    }

    .dot.green {
      background: var(--green);
      box-shadow: 0 0 0 4px rgba(22, 163, 74, .12);
    }

    .dot.yellow {
      background: var(--yellow);
      box-shadow: 0 0 0 4px rgba(234, 179, 8, .14);
    }

    .dot.orange {
      background: var(--orange);
      box-shadow: 0 0 0 4px rgba(249, 115, 22, .14);
    }

    .grid {
      padding: 0 18px 18px;
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 10px;
    }

    .pill {
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 12px 12px;
      background: #fff;
      min-height: 72px;
    }

    .pill h4 {
      margin: 0 0 6px;
      font-size: 12.5px;
      color: var(--muted);
      font-weight: 800;
      letter-spacing: .2px;
    }

    .pill p {
      margin: 0;
      font-size: 14px;
      line-height: 1.55;
      font-weight: 700;
      color: #0b1220;
    }

    .sections {
      border-top: 1px solid var(--border);
      padding: 16px 18px 18px;
      display: grid;
      grid-template-columns: 1.2fr 1fr;
      gap: 14px;
    }

    .sec {
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 14px;
      background: #fff;
    }

    .sec h3 {
      margin: 0 0 10px;
      font-size: 14px;
      font-weight: 900;
    }

    ul {
      margin: 0;
      padding-left: 18px;
    }

    li {
      margin: 6px 0;
      color: #111827;
      line-height: 1.6;
      font-size: 14px;
    }

    .footnote {
      margin-top: 10px;
      color: var(--muted);
      font-size: 12px;
      line-height: 1.6;
      text-align: left;
      padding: 0 18px 18px;
    }

    @media (max-width: 860px) {
      .grid {
        grid-template-columns: 1fr;
      }

      .sections {
        grid-template-columns: 1fr;
      }

      .hero {
        padding: 18px;
      }
    }

    #explanation:empty {
      display: none !important;
    }
  </style>
</head>

<body>
  <header>
    <div class="header-inner">
      <div class="logo" aria-label="Labelly">
        <!-- tag icon -->
        <svg width="34" height="34" viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
          <path d="M8 10h18l10 12-10 12H8a6 6 0 0 1-6-6V16a6 6 0 0 1 6-6z" fill="#2563EB" />
          <circle cx="14" cy="22" r="3" fill="#fff" />
        </svg>
        <div class="word">Labelly</div>
      </div>
    </div>
  </header>

  <main>
    <section class="hero">
      <p>
        ã“ã®é€šè²©ã‚µã‚¤ãƒˆã§ã€Œã‚ã¨ã‹ã‚‰å›°ã‚‰ãªã„ã‹ï¼Ÿã€<br>
        é…é€ãƒ»è¿”å“ãƒ»è¡¨è¨˜ãªã©ã€è¦‹è½ã¨ã—ã‚„ã™ã„æ¡ä»¶ã‚’äº‹å‰ã«è¦‹ãˆã‚‹åŒ–ã—ã¾ã™ã€‚
      </p>

      <div class="row">
        <input id="urlInput" class="url" inputmode="url" placeholder="https://example.com" autocomplete="off" />
        <button id="btn" class="btn" type="button">è¨ºæ–­</button>
      </div>
      <div class="hint">â€»ã“ã®è¨ºæ–­ã¯å…¬é–‹æƒ…å ±ã‚’ã‚‚ã¨ã«ã—ãŸæ¨å®šã§ã™ã€‚å®Ÿéš›ã®æ¡ä»¶ã¯è²©å£²è€…ã®æ¡ˆå†…ã‚’ã”ç¢ºèªãã ã•ã„ã€‚</div>
    </section>

    <div id="resultWrap"></div>
  </main>

  <script>
    const $ = (id) => document.getElementById(id);

    function escapeHtml(v) {
      return String(v ?? "")
        .replaceAll("&", "&amp;")
        .replaceAll("<", "&lt;")
        .replaceAll(">", "&gt;")
        .replaceAll('"', "&quot;")
        .replaceAll("'", "&#39;");
    }

    function dotClass(color) {
      if (color === "green") return "green";
      if (color === "yellow") return "yellow";
      return "orange";
    }

    function listHtml(arr) {
      if (!Array.isArray(arr) || arr.length === 0) return "<ul><li>ï¼ˆè©²å½“ãªã—ï¼‰</li></ul>";
      return "<ul>" + arr.map(x => `<li>${escapeHtml(x)}</li>`).join("") + "</ul>";
    }

    async function diagnose() {
      const url = $("urlInput").value.trim();
      const wrap = $("resultWrap");
      const btn = $("btn");
      wrap.innerHTML = "";
      btn.disabled = true;
      btn.textContent = "è¨ºæ–­ä¸­â€¦";

      try {
        const res = await fetch("/api/diagnose", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ url })
        });

        const data = await res.json();

        if (!res.ok) {
          throw new Error(data?.error || "request_failed");
        }

        const color = escapeHtml(data.color || "orange");
        const labelText = escapeHtml(data.labelText || "");
        const summary = escapeHtml(data.summary || "");
        const delivery = escapeHtml(data.delivery || "");
        const eta = escapeHtml(data.eta || "");
        const ret = escapeHtml(data.return || "");

        wrap.innerHTML = `
        <div class="result-card">
          <div class="result-top">
            ${summary ? `<div class="summary-line"><span class="bulb">ğŸ’¡</span><span>${summary}</span></div>` : ""}
            <div class="label">
              <span class="dot ${dotClass(color)}"></span>
              <span>${labelText}</span>
            </div>
          </div>

          <div class="grid">
            <div class="pill">
              <h4>é…é€</h4>
              <p>${delivery}</p>
            </div>
            <div class="pill">
              <h4>åˆ°ç€ç›®å®‰</h4>
              <p>${eta}</p>
            </div>
            <div class="pill">
              <h4>è¿”å“</h4>
              <p>${ret}</p>
            </div>
          </div>

          <div class="sections">
            <div class="sec">
              <h3>ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ</h3>
              ${listHtml(data.notes)}
            </div>
            <div class="sec">
              <h3>å‘ã„ã¦ã„ã‚‹äºº</h3>
              ${listHtml(data.good)}
              <div style="height:10px"></div>
              <h3>æ³¨æ„ã—ãŸã„äºº</h3>
              ${listHtml(data.caution)}
            </div>
          </div>

          <div class="footnote">
            â€»æœ¬è¨ºæ–­ã¯å…¬é–‹æƒ…å ±ã‚’ã‚‚ã¨ã«ã—ãŸæ¨å®šã§ã™ã€‚ç‰¹å®šã®äº‹æ¥­è€…ã‚’è©•ä¾¡ãƒ»æ‰¹åˆ¤ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚å®Ÿéš›ã®ç´æœŸãƒ»è¿”å“æ¡ä»¶ã¯è²©å£²è€…ã®æ¡ˆå†…ã‚’ã”ç¢ºèªãã ã•ã„ã€‚
          </div>
        </div>
      `;
      } catch (e) {
        wrap.innerHTML = `
        <div class="result-card">
          <div class="result-top">
            <div class="summary-line"><span class="bulb">âš ï¸</span><span>è¨ºæ–­ã«å¤±æ•—ã—ã¾ã—ãŸã€‚URLã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</span></div>
          </div>
          <div class="footnote">ä¾‹ï¼š https://www.sports-ws.com/ ã®ã‚ˆã†ã« https:// ã‹ã‚‰å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</div>
        </div>
      `;
      } finally {
        btn.disabled = false;
        btn.textContent = "è¨ºæ–­";
      }
    }

    $("btn").addEventListener("click", diagnose);
    $("urlInput").addEventListener("keydown", (e) => {
      if (e.key === "Enter") diagnose();
    });
  </script>
</body>
</html>